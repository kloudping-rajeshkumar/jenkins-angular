<div>
  <div class="page-wrapper">
    <!-- Page Content -->
    <div class="content container-fluid">
      <div class="crms-title row bg-white">
        <div class="col">
          <h3 class="page-title m-0">
            <span class="page-title-icon bg-gradient-primary text-white me-2">
              <i class="feather icon-smartphone"></i>
            </span>
            Scheduled Social Trigger
          </h3>
        </div>
        <div class="col text-end">
          <ul class="breadcrumb bg-white float-end m-0 ps-0 pe-0">
            <li class="breadcrumb-item">
              <a [routerLink]="routes.dealsDashboard">Dashboard</a>
            </li>
            <li class="breadcrumb-item active">Socials / Scheduled Social Trigger</li>
          </ul>
        </div>
      </div>

      <!-- Page Header -->
      <div class="page-header pt-3 mb-0">
        <div class="row">
          <div class="col">
            <div class="dropdown">
              <a class="dropdown-toggle recently-viewed" href="javascript:void(0);" role="button"
                data-bs-toggle="dropdown" aria-expanded="false">
                {{filterValue}}</a>
              <div class="dropdown-menu">

                <a class="dropdown-item" href="javascript:void(0);"
                  (click)="filterValue='All SocialTriggers';onFilterd();">All
                  Triggers</a>
                <a class="dropdown-item" href="javascript:void(0);"
                  (click)="filterValue='Recently Viewed';onFilterd();">Recently Viewed</a>
                <a class="dropdown-item" href="javascript:void(0);"
                  (click)="filterValue='Items I am following';onFilterd();">Items I am following</a>
                <a class="dropdown-item" href="javascript:void(0);"
                  (click)="filterValue='Trigger added in the last 24 hours';onFilterd();">Triggers added in the last 24
                  hours</a>
                <a class="dropdown-item" href="javascript:void(0);"
                  (click)="filterValue='Triggers added in the last 7 days';onFilterd();">Triggers added in the last 7
                  days</a>
              </div>
            </div>
          </div>
          <div class="col-auto text-end">
            <ul class="list-inline-item ps-0" >
              
                <li class="list-inline-item">
              <a href="javascript:void(0);" class="btn btn-primary btn-sm me-1" data-bs-toggle="modal"
              data-bs-target="#add_trigger"   (click)="resetform()" ><i class="feather icon-plus-circle me-1"></i> New Trigger</a>
          </li>
       </ul>                                    
          </div>
        </div>
      </div>
      <!-- /Page Header -->

      <!-- Content Starts -->
      <div class="row">
        <div class="col-md-12">
          <div class="card mb-0">
            <div class="card-body">
              <div class="table-responsive">
                <div class="table_header">
                  <div class="row">
                    <div class="col-sm-12 col-md-6">
                      <div class="dataTables_length">
                        <label>
                          Show
                          <select [(ngModel)]="pageSize" (ngModelChange)="PageSize()"
                            class="form-control form-control-sm">
                            <option value="10">10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                          </select>
                          entries
                        </label>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-md-12">
                        <div class="dataTables_filter">
                            <label>
                             
                                <input  type="search" [(ngModel)]="searchDataValue" (ngModelChange)="searchData(searchDataValue)" placeholder="search..."
                                   
                                   class="form-control form-control-sm" />
                            </label>
                        </div>
                    </div>
                </div>
              </div>
                <table matSort (matSortChange)="sortData($event)"
                  class="table table-striped table-nowrap custom-table mb-0 datatable dataTable no-footer">
                  <thead>
                    <tr>
                      <th>
                        Sno.
                      </th>
                        <th mat-sort-header="triggerName">SocialTrigger Name </th>
                      <th mat-sort-header="templateName">Templates</th>
                      <th mat-sort-header="title">Cron Expression</th>
                      <th mat-sort-header="fromEmail">From Email</th>
                      <th mat-sort-header="emailTo">To Email</th>
                      <th class="text-end">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let list of lstSocialTrigger; let i = index">

                      <td>{{i+1}} </td>
                      <td>

                        <a href="javascript:void(0);" data-bs-toggle="modal" (click)="edit(list)"
                          data-bs-target="#system-user">{{ list.triggerName }}</a>
                      </td>
                      <td>{{ list.templateId }}</td>
                      <td>{{ list.cronExpression }}</td>
                      
                      <td>{{ list.fromEmail}}</td>
                      <td>{{ list.emailTo }}</td>

                      <td class="text-center">
                        <div class="dropdown dropdown-action">
                          <a href="javascript:void(0);" class="action-icon dropdown-toggle" data-bs-toggle="dropdown"
                            aria-expanded="false"><i class="material-icons" style="margin-left: 50%;">more_vert</i></a>
                          <div class="dropdown-menu dropdown-menu-end">

                            <a class="dropdown-item" data-bs-toggle="modal" (click)="updateSocialTrigger(list)"
                              data-bs-target="#add_trigger">Edit This SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Change SocialTrigger Image</a>
                            <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#delete_social"
                            (click)="deleteSocialTriggers(list.id)" >Delete This SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Clone This SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Change Record Owner</a>
                            <a class="dropdown-item" href="javascript:void(0);">Generate Merge Document</a>
                            <a class="dropdown-item" href="javascript:void(0);">Change SocialTrigger To Lead</a>
                            <a class="dropdown-item" href="javascript:void(0);">Print This SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Email This SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Add New Task For SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Add New Event For SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Add Activity Set To SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Add New Deal For SocialTrigger</a>
                            <a class="dropdown-item" href="javascript:void(0);">Add New Project For SocialTrigger</a>

                          </div>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="table_footer">
                <div class="col-sm-12 col-md-5">
                  <div class="dataTables_info">
                    Showing {{ serialNumberArray[0] }} to
                    {{ serialNumberArray[serialNumberArray.length - 1] }} of
                    {{ lstSocialTrigger.length }} entries
                  </div>
                </div>

                <div class="col-sm-12 col-md-7">
                  <div class="pagination_section">
                    <ul class="pagination">
                      <li class="page-item" [ngClass]="{
                          disabled: currentPage == 1
                        }">
                        <a (click)="getMoreData('previous')" class="page-link" href="javascript:void(0);"
                          tabindex="-1">Previous</a>
                      </li>

                      <ng-container *ngFor="let item of pageNumberArray; let i = index">
                        <li class="page-item" [class.active]="item === currentPage" [ngClass]="
                            (pageNumberArray[currentPage - 2] > item &&
                              item != 1 &&
                              pageNumberArray.length > 6) ||
                            (pageNumberArray[currentPage] < item &&
                              item != 1 &&
                              pageNumberArray.length > 6 &&
                              pageNumberArray.length != item)
                              ? 'hide-page-no'
                              : 'show-page-no'
                          ">
                          <a (click)="moveToPage(item)" class="page-link" href="javascript:void(0);">
                            {{ item }}
                          </a>
                        </li>
                        <li class="page-item" *ngIf="
                            i == 0 &&
                            pageNumberArray.length > 6 &&
                            currentPage > 2
                          " [hidden]="currentPage == 1" (click)="moveToPage(currentPage - 2)">
                          <a class="page-link" href="javascript:void(0);">
                            ...
                          </a>
                        </li>
                        <li *ngIf="
                            i == pageNumberArray.length - 2 &&
                            pageNumberArray.length > 6
                          " [hidden]="
                            currentPage >=
                              pageNumberArray[pageNumberArray.length - 2] ||
                            totalData <
                              serialNumberArray[serialNumberArray.length - 1]
                          " class="page-item" (click)="moveToPage(currentPage + 2)">
                          <a class="page-link" href="javascript:void(0);">
                            ...
                          </a>
                        </li>
                      </ng-container>

                      <li class="page-item" [ngClass]="{
                          disabled:
                            currentPage ==
                              pageNumberArray[pageNumberArray.length - 1] ||
                            Trigger.length == 0
                        }">
                        <a (click)="getMoreData('next')" class="page-link" href="javascript:void(0);">Next
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /Content End -->
    </div>
    <!-- /Page Content -->
  </div>
  <!--modal section starts here-->
  <div class="modal fade" id="add-new-list">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Add New List View</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <form class="forms-sample">
            <div class="form-group row">
              <label for="view-name" class="col-sm-4 col-form-label">New View Name</label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="view-name" placeholder="New View Name" />
              </div>
            </div>
            <div class="form-group row pt-4">
              <label class="col-sm-4 col-form-label">Sharing Settings</label>
              <div class="col-sm-8">
                <div class="form-group">
                  <div class="form-check">
                    <label class="form-check-label">
                      <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios1" value="" />
                      Just For Me <i class="input-helper"></i></label>
                  </div>
                  <br />
                  <div class="form-check">
                    <label class="form-check-label">
                      <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios2"
                        value="option2" checked="" />
                      Share Filter with Everyone <i class="input-helper"></i></label>
                  </div>
                </div>
              </div>
            </div>

            <div class="text-center">
              <button type="submit" class="btn btn-gradient-primary me-2">
                Submit
              </button>
              <button type="button" class="btn btn-gradient-primary  btn-lg me-1">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!--Trigger Modal -->
  <div class="modal  fade" id="add_trigger" tabindex="-1" role="dialog" aria-modal="true"
  data-bs-backdrop="static">
  <div class="modal-dialog" role="document">

    <button type="button" class="close md-close" data-bs-dismiss="modal" aria-label="Close" #closebutton>

      <span aria-hidden="true">&times;</span>
    </button>
    <!--button-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title text-center">Schedule an Social Trigger</h4>
        <button type="button" class="btn-close xs-close close-modal" data-bs-dismiss="modal" #closebutton   (click)="resetform()" aria-label="Close">  <span aria-hidden="true"></span></button>
      </div>
<!-- /Page Header -->

<div class="modal-body">
  <div class="row">
    <div class="col-md-12">
      <form [formGroup]="socialTriggerForm" (ngSubmit)="updateSocialTrigger('')">
        <div class="form-group row">
          <div class="col-md-12">
            <label class="col-form-label">Social Trigger Name<span class="text-danger">*</span></label>
            <input class="form-control" type="text" placeholder="Trigger Name" name="triggerName" [class.invalid]="
            socialTriggerForm.get('triggerName ')?.invalid &&
            socialTriggerForm.get('triggerName')?.touched
              " formControlName="triggerName"  />
            <div *ngIf="
            socialTriggerForm.get('triggerName')?.invalid &&
            socialTriggerForm.get('triggerName')?.touched
              ">
              <small *ngIf="
              socialTriggerForm.get('triggerName')?.invalid &&
              socialTriggerForm.get('triggerName')?.touched
                " class="text-danger">
                *Name is required</small>
            </div>
          </div>
          
        </div>
        <div class="form-group row">
          <div class="col-md-12">
            <label class="col-form-label">Templates<span class="text-danger" >*</span></label>


            <select class="form-select" [class.invalid]="
            socialTriggerForm.get('templateId ')?.invalid &&
            socialTriggerForm.get('templateId')?.touched"  formControlName="templateId">

              <option *ngFor="let option of template" [value]=" option.id">
                {{ option.title }}
              </option>
            </select>
            <div *ngIf="
            socialTriggerForm.get('templateId')?.invalid &&
            socialTriggerForm.get('templateId')?.touched
          ">
              <small *ngIf="
              socialTriggerForm.get('templateId')?.invalid &&
              socialTriggerForm.get('templateId')?.touched
            " class="text-danger">
                *Template is required</small>
            </div>
          </div>
       </div>

       <div class="form-group row">
        <div class="col-md-12">
          <label class="col-form-label" >Social Type<span class="text-danger">*</span></label>


          <select class="form-select"   [class.invalid]="
          socialTriggerForm.get('fromEmail')?.invalid &&
          socialTriggerForm.get('fromEmail')?.touched"  formControlName="fromEmail" >
          <option >
        
              <a class="dropdown-item" href="javascript:void(0);">LinkedIn</a>
            </option>
            <option >
              <a class="dropdown-item"  href="javascript:void(0);">What's App</a>
            </option>
            <option >
              <a class="dropdown-item" href="javascript:void(0);">Freelancer.com</a>
            </option>
            <option >
              <a class="dropdown-item" href="javascript:void(0);">UpWork.com</a>
            </option>
            <option >
              <a class="dropdown-item" href="javascript:void(0);">Facebook.com</a>
            </option>
       
          </select>
          <div *ngIf="
            socialTriggerForm.get('fromEmail')?.invalid &&
            socialTriggerForm.get('fromEmail')?.touched">
            <small *ngIf="
            socialTriggerForm.get('fromEmail')?.invalid &&
            socialTriggerForm.get('fromEmail')?.touched" class="text-danger">
            *From Email is required</small>
          </div>
        </div>
     </div>

     <div class="form-group row">
      <div class="col-md-12">
        <div class="form-group row mb-0">
          
          <div class="col-lg-9">
            <div class="input-group">
              <input
                type="text"
                class="form-control"
                placeholder="Action"
              />
              <button
                type="button"
                class="btn btn-white dropdown-toggle"
                data-bs-toggle="dropdown"
              >
                Action
              </button>
              <div class="dropdown-menu dropdown-menu-end">
                <a class="dropdown-item" href="javascript:void(0);"
                  >Action</a
                >
                <a class="dropdown-item" href="javascript:void(0);"
                  >Another action</a
                >
                <a class="dropdown-item" href="javascript:void(0);"
                  >Something else here</a
                >
                <div role="separator" class="dropdown-divider"></div>
                <a class="dropdown-item" href="javascript:void(0);"
                  >Separated link</a
                >
              </div>
            </div>
          </div>
        </div>    
      </div>
   </div>


     <div class="form-group row">
      <div class="col-md-12">
        <label class="col-form-label">Cron Expression &nbsp;  </label> <i data-bs-toggle="tooltip" title="feather-link" class="feather icon-link"></i> &nbsp;<a href="https://crontab.cronhub.io/" target="_blank">Generate the expression through online </a>

        <input type="text" id="expression"  class="form-control" name="CronExpression" placeholder=" * * * * * " formControlName="cronExpression"  [class.invalid]="
        socialTriggerForm.get('cronExpression ')?.invalid &&
        socialTriggerForm.get('cronExpression')?.touched
          "  />
          <div *ngIf="
          socialTriggerForm.get('cronExpression')?.invalid &&
          socialTriggerForm.get('cronExpression')?.touched
        ">
            <small *ngIf="
            socialTriggerForm.get('cronExpression')?.invalid &&
            socialTriggerForm.get('cronExpression')?.touched
          " class="text-danger">
              *Cron Expression is required</small>
          </div>
      </div>
    </div> 
    <div class="form-group row">
      <div class="col-md-12">
        <label class="col-form-label">Notification Channel<span class="text-danger">*</span></label>


        <select class="form-select"[class.invalid]="
        socialTriggerForm.get('fromEmail')?.invalid &&
        socialTriggerForm.get('fromEmail')?.touched"  formControlName="fromEmail">
          <option >
            <a class="dropdown-item" href="javascript:void(0);">What's App Group</a>
          </option>
          <option >
            <a class="dropdown-item" href="javascript:void(0);">Telegram Group</a>
          </option>
          <option >
            <a class="dropdown-item" href="javascript:void(0);">Email</a>
          </option>
          <option >
            <a class="dropdown-item" href="javascript:void(0);">Teams</a>
          </option>
         
        </select>
        <div *ngIf="
          socialTriggerForm.get('fromEmail')?.invalid &&
          socialTriggerForm.get('fromEmail')?.touched">
          <small *ngIf="
          socialTriggerForm.get('fromEmail')?.invalid &&
          socialTriggerForm.get('fromEmail')?.touched" class="text-danger">
          *From Email is required</small>
        </div>
      </div>
   </div>

            </form>
          </div>
        </div>
      </div>
    </div>
      <!-- modal-content -->
    </div>
    <!-- modal-dialog -->
  </div>
  <!-- modal -->



   <!-- modal -->
<!-- Delete Trigger Modal  -->
<div class="modal custom-modal fade" id="delete_social" role="dialog" data-bs-backdrop='static'>

  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <div class="form-header">
          <h3>Delete SocialTrigger</h3>
          <p>Are you sure want to delete?</p>
        </div>
        <div class="modal-btn delete-action">
          <div class="row">
            <div class="col-6">
              <a (click)="deleteSocialTriggers('')" class="btn btn-primary continue-btn">Delete</a>
            </div>
            <div class="col-6">
              <a href="javascript:void(0);" data-bs-dismiss="modal" #deleteclosebutton
                class="btn btn-primary cancel-btn">Cancel</a>
            </div>
          </div>
        </div>
      
      </div>
    </div>
  </div>
</div>


<!-- /Delete Designation Modal -->

  <!--system users Modal -->
   <div class="modal right fade" id="system-user" tabindex="-1" role="dialog" aria-modal="true"
    data-bs-backdrop='static'>
    <div class="modal-dialog" role="document">
      <button type="button" class="close md-close" data-bs-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close xs-close close-modal" data-bs-dismiss="modal"></button>

          <div class="row w-100">
            <div class="col-md-7 account d-flex">

              <div>
                <p class="mb-0"></p>
                <span class="modal-title">{{ socialTrigger.triggerName}}</span>

                <span class="rating-star ms-2" (click)="addFollower(socialTrigger)"><i
                    class="fa fa-star fa-2x toggle-password" aria-hidden="true"
                    [ngClass]="{'active': isActive}"></i></span>

                <span class="lock ms-2"><i class="fa fa-lock" aria-hidden="true"></i></span>
              </div>
            </div>
            <div class="col-md-5 text-end">
              <ul class="list-unstyled list-style-none">
                <li class="dropdown list-inline-item">
                  <br />
                  <a class="dropdown-toggle" href="javascript:void(0);" role="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    Actions
                  </a>
                  <div class="dropdown-menu">
                    <a class="dropdown-item" href="javascript:void(0);">Edit This SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Change SocialTrigger Image</a>
                    <a class="dropdown-item" href="javascript:void(0);">Delete This SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Clone This SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Change Record Owner</a>
                    <a class="dropdown-item" href="javascript:void(0);">Generate Merge Document</a>
                    <a class="dropdown-item" href="javascript:void(0);">Change SocialTrigger To Lead</a>
                    <a class="dropdown-item" href="javascript:void(0);">Print This SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Email This SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Add New Task For SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Add New Event For SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Add Activity Set To SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Add New Deal For SocialTrigger</a>
                    <a class="dropdown-item" href="javascript:void(0);">Add New Project For SocialTrigger</a>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="card due-dates">
          <div class="card-body">
            <div class="row">
              <div class="col">
                <span>Triggername</span>

                <p>{{ socialTrigger.triggerName }}</p>
              </div>
              <div class="col">
                <span>Organization</span>
                <p>{{ socialTrigger.templateID }}</p>
              </div>
              <div class="col">
                <span>Phone</span>
                <p>{{ socialTrigger.cronExpression }}</p>
              </div>
              <div class="col">
                <span>fromEmail</span>
                <p>{{ socialTrigger.fromEmail}}</p>
              </div>
              <div class="col">
                <span>Emailto</span>
                <p>{{ socialTrigger.emailTo }}</p>
              </div>
            </div>
          </div>
        </div>



